<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux安装Nginx正确方式 | 前端小札</title>
    <meta name="description" content="">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?8092fab2f2adfc7938ba5b8885aef5b4";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <link rel="icon" href="/syy-notes/favicon.ico">
    <link rel="manifest" href="/syy-notes/manifest.json">
    <link rel="apple-touch-icon" href="/syy-notes/favicon.ico">
    <link rel="mask-icon" href="/syy-notes/favicon.ico" color="#3eaf7c">
    <meta name="description" content="前端常用知识、踩坑记录等">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon.ico">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/syy-notes/assets/css/0.styles.624e67a4.css" as="style"><link rel="preload" href="/syy-notes/assets/js/app.94251a10.js" as="script"><link rel="preload" href="/syy-notes/assets/js/2.413ce9d8.js" as="script"><link rel="preload" href="/syy-notes/assets/js/5.112ab975.js" as="script"><link rel="preload" href="/syy-notes/assets/js/22.99700ca6.js" as="script"><link rel="preload" href="/syy-notes/assets/js/6.117958ab.js" as="script"><link rel="prefetch" href="/syy-notes/assets/js/10.64fdab0d.js"><link rel="prefetch" href="/syy-notes/assets/js/11.4624a5c2.js"><link rel="prefetch" href="/syy-notes/assets/js/12.9cc07621.js"><link rel="prefetch" href="/syy-notes/assets/js/13.5971b759.js"><link rel="prefetch" href="/syy-notes/assets/js/14.a0a9988d.js"><link rel="prefetch" href="/syy-notes/assets/js/15.c1530251.js"><link rel="prefetch" href="/syy-notes/assets/js/16.0314629b.js"><link rel="prefetch" href="/syy-notes/assets/js/17.1e29a81c.js"><link rel="prefetch" href="/syy-notes/assets/js/18.790951f8.js"><link rel="prefetch" href="/syy-notes/assets/js/19.5378d830.js"><link rel="prefetch" href="/syy-notes/assets/js/20.96f207e8.js"><link rel="prefetch" href="/syy-notes/assets/js/21.45f9d452.js"><link rel="prefetch" href="/syy-notes/assets/js/23.24626e87.js"><link rel="prefetch" href="/syy-notes/assets/js/24.738d2cc7.js"><link rel="prefetch" href="/syy-notes/assets/js/25.86f5795d.js"><link rel="prefetch" href="/syy-notes/assets/js/26.34981b86.js"><link rel="prefetch" href="/syy-notes/assets/js/27.48abb2a3.js"><link rel="prefetch" href="/syy-notes/assets/js/28.0feea109.js"><link rel="prefetch" href="/syy-notes/assets/js/29.2eb3754b.js"><link rel="prefetch" href="/syy-notes/assets/js/3.90311236.js"><link rel="prefetch" href="/syy-notes/assets/js/30.efca3200.js"><link rel="prefetch" href="/syy-notes/assets/js/31.2efe7691.js"><link rel="prefetch" href="/syy-notes/assets/js/32.a541e6d5.js"><link rel="prefetch" href="/syy-notes/assets/js/33.610bb824.js"><link rel="prefetch" href="/syy-notes/assets/js/34.fc65c69e.js"><link rel="prefetch" href="/syy-notes/assets/js/35.014c59d8.js"><link rel="prefetch" href="/syy-notes/assets/js/36.b50299fa.js"><link rel="prefetch" href="/syy-notes/assets/js/37.05a633bd.js"><link rel="prefetch" href="/syy-notes/assets/js/38.7d2180cc.js"><link rel="prefetch" href="/syy-notes/assets/js/39.5cd7d009.js"><link rel="prefetch" href="/syy-notes/assets/js/4.a0f03d66.js"><link rel="prefetch" href="/syy-notes/assets/js/40.cb8f7c03.js"><link rel="prefetch" href="/syy-notes/assets/js/41.9f390a34.js"><link rel="prefetch" href="/syy-notes/assets/js/42.d71f6421.js"><link rel="prefetch" href="/syy-notes/assets/js/43.80099269.js"><link rel="prefetch" href="/syy-notes/assets/js/44.3c3bcfdb.js"><link rel="prefetch" href="/syy-notes/assets/js/45.d5451420.js"><link rel="prefetch" href="/syy-notes/assets/js/46.5987b817.js"><link rel="prefetch" href="/syy-notes/assets/js/47.ef14d2ca.js"><link rel="prefetch" href="/syy-notes/assets/js/48.4b7f6b43.js"><link rel="prefetch" href="/syy-notes/assets/js/49.3cf55b41.js"><link rel="prefetch" href="/syy-notes/assets/js/50.23261b7f.js"><link rel="prefetch" href="/syy-notes/assets/js/51.a47e5363.js"><link rel="prefetch" href="/syy-notes/assets/js/7.d6fac5d5.js"><link rel="prefetch" href="/syy-notes/assets/js/8.ec0f6991.js"><link rel="prefetch" href="/syy-notes/assets/js/9.da3f8c13.js">
    <link rel="stylesheet" href="/syy-notes/assets/css/0.styles.624e67a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/syy-notes/" class="home-link router-link-active"><!----> <span class="site-name">前端小札</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作项目" class="dropdown-title"><span class="title">工作项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="工作项目" class="mobile-dropdown-title"><span class="title">工作项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://admin.yuke520.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  后台管理系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/syy-notes/uniapp/yukexcx.html" class="nav-link">
  裕客商城小程序
</a></li></ul></div></div><div class="nav-item"><a href="https://yu-nan.gitee.io/suui" target="_blank" rel="noopener noreferrer" class="nav-link external">
   suUI 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.syy123.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  言叶之庭
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/suyanye123/syy-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/syy-notes/introduce/" class="nav-link">
  关于我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工作项目" class="dropdown-title"><span class="title">工作项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="工作项目" class="mobile-dropdown-title"><span class="title">工作项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://admin.yuke520.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  后台管理系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/syy-notes/uniapp/yukexcx.html" class="nav-link">
  裕客商城小程序
</a></li></ul></div></div><div class="nav-item"><a href="https://yu-nan.gitee.io/suui" target="_blank" rel="noopener noreferrer" class="nav-link external">
   suUI 
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.syy123.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  言叶之庭
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关于" class="dropdown-title"><span class="title">关于</span> <span class="arrow down"></span></button> <button type="button" aria-label="关于" class="mobile-dropdown-title"><span class="title">关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/suyanye123/syy-notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/syy-notes/introduce/" class="nav-link">
  关于我
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/syy-notes/mytools/" class="sidebar-link">网页工具</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/syy-notes/demo/" class="sidebar-heading clickable router-link-active"><span>我的项目</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/syy-notes/mix/" class="sidebar-heading clickable"><span>混合开发</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/syy-notes/git/" class="sidebar-link">Git</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/syy-notes/webGL/" class="sidebar-heading clickable"><span>WebGL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/syy-notes/utils/" class="sidebar-heading clickable"><span>utils</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/syy-notes/freeTalk/" class="sidebar-heading clickable"><span>写点东西</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="linux安装nginx正确方式"><a href="#linux安装nginx正确方式" class="header-anchor">#</a> Linux安装Nginx正确方式</h1> <blockquote><p>本文出处<a href="https://shenyifengtk.github.io/2019/07/19/Linux%E5%AE%89%E8%A3%85Nginx%E6%AD%A3%E7%A1%AE%E6%96%B9%E5%BC%8F/" target="_blank" rel="noopener noreferrer">shenyifengtk.github.io<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 如有转载，请说明出处</p></blockquote> <p>如果你和我一样，作为一个苦逼的Java后台除了实现实现一大堆项目功能，还要兼顾项目的部署，运维工作。在新的服务器上安装新Nginx，在安装之前看下网上的教程,面对五花八门的教程，各式各样的安装方法，心里总会嘀咕什么方式才是最好的，或者说什么方法才是最适合自己的？下面我们一起来分析Nginx各种安装方式，分别适合于那种情况。</p> <h3 id="使用系统二进制源方式安装"><a href="#使用系统二进制源方式安装" class="header-anchor">#</a> 使用系统二进制源方式安装</h3> <p>在Ubuntu/Debian系</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx
</code></pre></div><p>或者RedHat/CentOS系</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> nginx 
</code></pre></div><p>这种方式最简单的，最快捷的方式，但是不是最好的方式，下面我们来说这种主要问题。</p> <p>优点</p> <ul><li>所有安装二进制依赖已经处理好了，不用担心兼容性问题，开箱即用</li> <li>Nginx的连接配置，用户权限这个都不用处理，已经帮你写好这块了</li> <li>不用担心Nginx Bug维护升级问题，直接获取最新系统就可以了</li> <li>卸载简单，直接一个命令即可</li> <li>日志维护简单，自动截断当天日志，压缩保存</li></ul> <p>缺点</p> <ul><li>不能自主选择安装版本</li> <li>不能自主选择编译的模块</li> <li>扩展功能变得很麻烦，需要重新编译</li> <li>目类结构复杂，配置文件在<code>/etc/</code>下，部署文件在<code>/var/www</code></li> <li>重启服务，修改配置都需要root权限</li> <li>性能差一点编译安装</li></ul> <p>如果你是一个Linux新手，绝对推荐使用这中方式安装，不用考虑编译依赖问题，直接安装完就可以使用。但是如果你这个服务器是用于生产环境正在开发逐步完善的过程，不推荐使用这种方式。将来可能会添加第三方模块，到时肯定要编译安装(下面会说到)。在重启服务器的时候，不要使用root用户，而是使用<code>sudo</code>短暂获取root。如果你这条服务器都是用来部署一些静态文件，主要做一些web空间，平常主要用ftp工具部署文件，用这种方式肯定没什么问题的。</p> <h3 id="编译安装"><a href="#编译安装" class="header-anchor">#</a> 编译安装</h3> <p>优缺点，我就不写了，基本就是上面的颠倒过来就可以了。使用这种方法安装，都必须懂一点Linux编译知识，Linux中度用户才可以驾驭。我看见网上大多数教程，都是将编译依赖直接装在<code>/usr/local/</code>这种方式并不好。如果将来我们要卸载这些依赖，发现非常麻烦。并不是直接在目类下直接删除就可以完事的，有些Linux发行版本，会将安装文件，写入配置文件中，这些配置文件有不知道哪里找。如果依赖版本影响到其他软件，怎么处理版本问题。我们只想安装Nginx，结果延申出一大堆问题。</p> <h5 id="编译环境准备"><a href="#编译环境准备" class="header-anchor">#</a> 编译环境准备</h5> <p>在开始之前，保证你的Linux准备了gcc、make、wget,g++ 这些软件。 创建一个目类用来存放下载文件,进入目录中下载依赖库源文件</p> <p>下载<code>openssl</code>主要用于ssl模块加密，支持htps</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://www.openssl.org/source/openssl-1.0.2s.tar.gz
</code></pre></div><p>下载<code>pcre</code>来实现对地址重定向，地址重写功能和localtion指令以及正则表达式的支持</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://ftp.pcre.org/pub/pcre/pcre-8.43.tar.gz
</code></pre></div><p>下载<code>zlib</code> gzip压缩模块</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://zlib.net/zlib-1.2.11.tar.gz
</code></pre></div><p>下载Nginx</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> http://nginx.org/download/nginx-1.20.1.tar.gz
</code></pre></div><p>使用tar 解压所有的文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> *.tar.gz <span class="token operator">|</span> <span class="token function">xargs</span> -n1 <span class="token function">tar</span> xzvf  
</code></pre></div><h5 id="编译选项"><a href="#编译选项" class="header-anchor">#</a> 编译选项</h5> <p>使用<code>./configure</code>设置各种Nginx参数的脚本，包括源和配置文件的路径，编译器选项，连接处理方法和模块列表。该脚本通过创建编译代码和安装Nginx开源所需的Makefile来完成。</p> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td>--prefix=<PATH></PATH></td> <td>Nginx安装目录，以及有其他配置脚本选项的路径设置的所有相对路径的基本位置。默认值<code>/usr/local/nginx</code></td></tr> <tr><td>--sbin-path=&lt;PATH</td> <td>Nginx二进制执行文件的名称，默认值:<code>&lt;prefix&gt;/sbin/nginx</code></td></tr> <tr><td>--conf-path=<PATH></PATH></td> <td>Nginx配置文件的名称。但是，您可以通过在nginx命令行上使用选项指定其他文件来始终在启动时覆盖此值。默认值：<code>&lt;prefix&gt; conf / nginx.conf-c &lt;FILENAME&gt;</code></td></tr> <tr><td>--pid-path=<PATH></PATH></td> <td>nginx.pid文件的名称，用于存储nginx主进程的进程ID 。安装后，可以使用Nginx配置文件中的pid指令更改文件名的路径。默认值：<code>&lt;prefix&gt; /logs/nginx.pid</code></td></tr> <tr><td>--error-log-path=<PATH></PATH></td> <td>error，warn和诊断数据的日志文件的名称。安装后，可以使用Nginx配置文件中的error_log指令更改文件名。默认值：<code>&lt;prefix&gt; /logs/error.log</code></td></tr> <tr><td>--http-log-path=<PATH></PATH></td> <td>HTTP服务器请求的主日志文件的名称。安装后，始终可以使用Nginx配置文件中的access_log指令更改文件名。默认值：<code>&lt;prefix&gt; /logs/access.log</code></td></tr> <tr><td>--user=<NAME></NAME></td> <td>Nginx运行进程的拥有者。安装后，可以使用Nginx配置文件中的user指令更改名称。默认：<code>nobody</code></td></tr> <tr><td>--group=name</td> <td>nginx运行进程的拥有者用户组。安装后，可以使用NGINX配置文件中的user指令更改名称。默认值：--user选项设置的值</td></tr> <tr><td>--with-pcre=<PATH></PATH></td> <td>PCRE库源代码的路径，这是位置指令和Rewrite模块中正则表达式支持所必需的</td></tr> <tr><td>--with-pcre-jit</td> <td>使用“即时编译”支持（pcre_jit指令）构建PCRE库</td></tr> <tr><td>--with-zlib=<PATH></PATH></td> <td>zlib库的源代码路径，Gzip模块需要该路径</td></tr> <tr><td>--with-http_ssl_modul</td> <td>启用HTTPS支持</td></tr> <tr><td>--with-http_v2_module</td> <td>开启 HTTP/2请求支持</td></tr></tbody></table> <p>还要太多编译参数我就不一一列举，有兴趣的同学可以自己去 <a href="https://docs.nginx.com/nginx/admin-guide/installing-nginx/installing-nginx-open-source/#sources" target="_blank" rel="noopener noreferrer">nginx官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>参看</p> <h5 id="编译安装-2"><a href="#编译安装-2" class="header-anchor">#</a> 编译安装</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>./configure <span class="token punctuation">\</span>
   --with-openssl<span class="token operator">=</span><span class="token punctuation">..</span>/openssl-1.0.2s <span class="token punctuation">\</span>
   --with-pcre<span class="token operator">=</span><span class="token punctuation">..</span>/pcre-8.43 <span class="token punctuation">\</span>
   --with-zlib<span class="token operator">=</span><span class="token punctuation">..</span>/zlib-1.2.11 <span class="token punctuation">\</span>
   --with-pcre-jit --user<span class="token operator">=</span>admin <span class="token punctuation">\</span>
   --prefix<span class="token operator">=</span>/home/admin/nginx <span class="token punctuation">\</span>
   --with-http_ssl_module <span class="token punctuation">\</span>
   --with-http_v2_module 
复制代码
</code></pre></div><p>输出以下信息，说明依赖没问题</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Configuration summary
  + using PCRE library: <span class="token punctuation">..</span>/pcre-8.43
  + using OpenSSL library: <span class="token punctuation">..</span>/openssl-1.0.2s
  + using zlib library: <span class="token punctuation">..</span>/zlib-1.2.11
  
  nginx path prefix: <span class="token string">&quot;/home/admin/nginx&quot;</span>
  nginx binary file: <span class="token string">&quot;/home/admin/nginx/sbin/nginx&quot;</span>
  nginx modules path: <span class="token string">&quot;/home/admin/nginx/modules&quot;</span>
  nginx configuration prefix: <span class="token string">&quot;/home/admin/nginx/conf&quot;</span>
  nginx configuration file: <span class="token string">&quot;/home/admin/nginx/conf/nginx.conf&quot;</span>
  nginx pid file: <span class="token string">&quot;/home/admin/nginx/logs/nginx.pid&quot;</span>
  nginx error log file: <span class="token string">&quot;/home/admin/nginx/logs/error.log&quot;</span>
  nginx http access log file: <span class="token string">&quot;/home/admin/nginx/logs/access.log&quot;</span>
  nginx http client request body temporary files: <span class="token string">&quot;client_body_temp&quot;</span>
  nginx http proxy temporary files: <span class="token string">&quot;proxy_temp&quot;</span>
  nginx http fastcgi temporary files: <span class="token string">&quot;fastcgi_temp&quot;</span>
  nginx http uwsgi temporary files: <span class="token string">&quot;uwsgi_temp&quot;</span>
  nginx http scgi temporary files: <span class="token string">&quot;scgi_temp&quot;</span>
复制代码
</code></pre></div><p>编译</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">make</span>
</code></pre></div><p>安装</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><h5 id="设置权限"><a href="#设置权限" class="header-anchor">#</a> 设置权限</h5> <p>因为Linux设置普通用户，不能占用1024一下的端口，直接启动nginx会出现权限不足的错误。将nginx分配给root用户，在分配特殊权限。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> root nginx
<span class="token function">sudo</span> <span class="token function">chmod</span> u+s nginx
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!---->  <div id="gitalk-container"></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/syy-notes/assets/js/app.94251a10.js" defer></script><script src="/syy-notes/assets/js/2.413ce9d8.js" defer></script><script src="/syy-notes/assets/js/5.112ab975.js" defer></script><script src="/syy-notes/assets/js/22.99700ca6.js" defer></script><script src="/syy-notes/assets/js/6.117958ab.js" defer></script>
  </body>
</html>