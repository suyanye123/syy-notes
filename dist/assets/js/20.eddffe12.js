(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{416:function(t,s,a){"use strict";a.r(s);var e=a(28),p=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"gogs安装及使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gogs安装及使用"}},[t._v("#")]),t._v(" Gogs安装及使用")]),t._v(" "),a("p",[t._v("首先打开命令行，输入")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("wget https://dl.gogs.io/0.11.91/gogs_0.11.91_linux_amd64.zip\n")])])]),a("p",[t._v("这里我的服务器使用的阿里云的 Centos，最低配置的，平时就放点自己做的项目啥的。当然如果你是别的系统，或者选择不用 wget。也可以去 Gogs 官网去把远吗包 down 下来传给服务器。")]),t._v(" "),a("p",[t._v("下一步：解压")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("unzip gogs_0.11.91_linux_amd64.zip\n")])])]),a("p",[t._v("然后。然后就没有然后了。到这一步，安装就结束了。有够简单吧！")]),t._v(" "),a("p",[t._v("下一步：运行")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("./gogs/gogs web\n")])])]),a("p",[t._v("这时，访问服务器的 3000 端口，就会看到下面的页面。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-9a6535177cf5e11e04bbf5aa60969f09_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("这一步是要配置 Gogs 服务器，配置以后才能使用。")]),t._v(" "),a("p",[t._v("为了方便，我就选了最简单的配置：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-fc9e364dfaa3ad6219f6ccacf2d3975d_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-962549031b8226d1a9070eabb55255d6_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("然后安装，页面就会跳到：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-de1f99c10dd44d29bc59e6e4cfa2c72c_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("至此。Gogs 代码服务器安装配置好了，并且可以使用了。")]),t._v(" "),a("p",[t._v("当然，这里展示的是 linux 下的安装。如果你是想要在 window 下搭建其实也一样，就是不把 localhost 替换为自己的域名就好。")]),t._v(" "),a("p",[t._v("因为我的实在服务器运行的。因此还需要把 Gogs 配置为系统服务。不然 shell 一关，Gogs 也会停止运行。")]),t._v(" "),a("p",[t._v("具体步骤如下：")]),t._v(" "),a("p",[t._v("执行：")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cp ./gogs/scripts/systemd/gogs.service /etc/systemd/system/gogs.service\nvi /etc/systemd/system/gogs.service\n")])])]),a("p",[t._v("将文件修改为：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-bfeb27721fe8728bc8e0040718ef12d0_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("这里主要是修改的访问用户和访问文件夹。我用的是 root 用户，root 文件夹。因为这样比较方便，当然如果你有需要，也可以单独配置用户。")]),t._v(" "),a("p",[t._v("这样一个简单的代码服务器就搭建完毕。当然除了这种安装方式，官方也提供了其他安装方式：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-409db22b546cb7c6a8fcec2f4c7f9488_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("这里用的二进制安装。")]),t._v(" "),a("p",[t._v("安装完成后，就开始撸代码了。新建仓库，将本地代码添加一个源：")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("git remote add gogs http://yinchengnuo.com:3000/yinchengnuo/mockApiNode.git\n")])])]),a("p",[t._v("执行 git remote -v")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("gogs    http://yinchengnuo.com:3000/yinchengnuo/mockApiNode.git (fetch)\ngogs    http://yinchengnuo.com:3000/yinchengnuo/mockApiNode.git (push)\norigin  https://github.com/yinchengnuo/mockApiNode.git (fetch)\norigin  https://github.com/yinchengnuo/mockApiNode.git (push)\n")])])]),a("p",[t._v("在 package.json 添加指令：")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"push": "git add . && git commit -m \'publish\' && git push gogs master --force && git push origin master --force"\n')])])]),a("p",[t._v("执行：")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm run push\n")])])]),a("p",[t._v("代码服务器上就有代码了：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-a1ccb69655de5b9f9aa0cbdc9df6d57e_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("接下来，添加 webHook：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-5ab5a8f2785d7ba46095441131863052_720w.jpg",alt:"img"}})]),t._v(" "),a("p",[t._v("最后一步，更改服务器代码 origin：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-50dd6ffb0962e500d4b0c766b7950322_720w.png",alt:"img"}})]),t._v(" "),a("p",[t._v("当然，webHook 里填写的地址的接口是之前已经写好的：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("    router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/gitHook"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// github hook")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("execSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git reset --hard && git pull origin master --force'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("就这么简单。")]),t._v(" "),a("p",[t._v("当然，在实际的工作中。无论是处理代码服务器用户，还是 webHook 等，该限权的要限权，该加密的要加密，一定不能忽视安全问题。这里只是作为一个前端小白在这里的一点尝试与摸索的记录，希望能够对你所有帮助。")])])}),[],!1,null,null,null);s.default=p.exports}}]);