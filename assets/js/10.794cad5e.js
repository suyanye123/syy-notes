(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{367:function(t,s,a){t.exports=a.p+"assets/img/centos.18697def.png"},396:function(t,s,a){"use strict";a.r(s);var e=a(28),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"言叶之庭"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#言叶之庭"}},[t._v("#")]),t._v(" 言叶之庭")]),t._v(" "),e("p",[t._v("这里主要是我个人服务器部署，以及搭建动态网站的点点滴滴记录")]),t._v(" "),e("p",[t._v("大部分涉及到的是运维相关知识~")]),t._v(" "),e("h2",{attrs:{id:"服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[t._v("#")]),t._v(" 服务器")]),t._v(" "),e("p",[t._v("操作系统主要为 ubuntu 18.04 LTS，ubuntu操作较为简便，且可以安装图形化版本，适合个人，CentOS（redhat社区版）更适合做大服务器  "),e("a",{attrs:{href:"https://www.centos.org/centos-linux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("centOS下载"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("这里不多做解释相关Linux基础知识")]),t._v(" "),e("p",[t._v("常用开放端口，比如80(web)、443(https)、21(ftp)、22(ssh)、3306(mysql)等")]),t._v(" "),e("h2",{attrs:{id:"虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机"}},[t._v("#")]),t._v(" 虚拟机")]),t._v(" "),e("h3",{attrs:{id:"_1-新建一个centos7-虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建一个centos7-虚拟机"}},[t._v("#")]),t._v(" 1.新建一个centOS7 虚拟机")]),t._v(" "),e("p",[e("img",{attrs:{src:a(367),alt:"image-20210510131501899"}})]),t._v(" "),e("p",[e("code",[t._v("ping 127.0.0.1")]),t._v("    然后   "),e("code",[t._v("ping www.baidu.com")]),t._v("\t测试虚拟机能否正常联网")]),t._v(" "),e("p",[t._v("如果百度ping不通，说明没有IP或者你没有启用联网功能，此时请更改网络配置文件")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/sysconfig/network-scripts/ifcfg-ens33  //用vi编辑器打开网络配置文件\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ONBOOT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("no-----"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("ONBOOT"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("yes\t//修改这一项，即 开机启动该网卡\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" network restart\t\t//网络重启\n")])])]),e("p",[t._v("关于vim编辑器的使用： 打开后按a或者i才能进入编辑模式，编辑完后按esc退出编辑模式，变成命令模式，然")]),t._v(" "),e("p",[t._v("​\t后再输入：即可跳转至末行，最后输入x命令即可保存。")]),t._v(" "),e("p",[t._v("#注："),e("code",[t._v("vi /etc/sysconfig/network-scripts/ifcfg-ens33")]),t._v("   网络配置文件名可能会有不同，在输入到ifcfg时，可以连续按两下tab键，获取提示，比如我的机器 为 ifcfg-ens33")]),t._v(" "),e("p",[t._v("完整网络配置内容如下：")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("TYPE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Ethernet\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BOOTPROTO")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("static              "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#静态连接")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ens33\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("UUID")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1f093d71-07de-4ca5-a424-98e13b4e9532 \n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DEVICE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ens33 \n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ONBOOT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("yes                    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#网络设备开机启动 ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IPADDR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".0.101          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#192.168.59.x, x为3~255. ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NETMASK")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#子网掩码 ")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GATEWAY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".66.2          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#网关IP")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("DNS1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".66.2\n")])])]),e("h3",{attrs:{id:"_2-远程连接及建立ftp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-远程连接及建立ftp"}},[t._v("#")]),t._v(" 2.远程连接及建立ftp")]),t._v(" "),e("h4",{attrs:{id:"xshell连接虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xshell连接虚拟机"}},[t._v("#")]),t._v(" Xshell连接虚拟机")]),t._v(" "),e("p",[t._v("在虚拟机中输入 "),e("code",[t._v("ifconfig")]),t._v("，显示虚拟机ip地址")]),t._v(" "),e("p",[t._v("然后在Xshell中新建会话，ssh协议，22端口，输入虚拟机root账号密码，即可维持连接登录")]),t._v(" "),e("h4",{attrs:{id:"安装vsftpd-ftp服务端-或xftp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装vsftpd-ftp服务端-或xftp"}},[t._v("#")]),t._v(" 安装vsftpd（ftp服务端） 或Xftp")]),t._v(" "),e("p",[t._v("安装好vsftpd后，发现root用户怎么都访问不了ftp")]),t._v(" "),e("p",[t._v("修改以下两个文件，将其中的root字段删除")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/vsftpd/ftpusers\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/vsftpd/user_list\n")])])]),e("p",[t._v("然后重启vsftpd服务，ok，问题解决。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" vsftpd restart\n")])])]),e("p",[e("a",{attrs:{href:"./vsftpd"}},[t._v("深入vsftpd配置")])]),t._v(" "),e("h4",{attrs:{id:"安装filezilla-client-多线程ftp客户端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装filezilla-client-多线程ftp客户端"}},[t._v("#")]),t._v(" 安装FileZilla Client（多线程ftp客户端）")]),t._v(" "),e("p",[t._v("根据虚拟机ip地址，添加站点，然后关闭"),e("strong",[t._v("selinux")]),t._v("限制")]),t._v(" "),e("p",[t._v("先运行"),e("code",[t._v("getsebool -a | grep ftp")]),t._v(" (查看selinux里有哪些关于ftp的)")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("allow_ftpd_anon_write –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nallow_ftpd_full_access –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nallow_ftpd_use_cifs –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nallow_ftpd_use_nfs –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nftp_home_dir –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nftpd_connect_db –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nhttpd_enable_ftp_server –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nsftpd_anon_write –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nsftpd_enable_homedirs –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nsftpd_full_access –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\nsftpd_write_ssh_home –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\ntftp_anon_write –"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" off\n")])])]),e("p",[t._v("接下来我们allow_ftpd_anon_write  、 allow_ftpd_full_access 这两个ON掉。")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("setsebool -P allow_ftpd_anon_write on \nsetsebool -P allow_ftpd_full_access on\n")])])]),e("p",[t._v("即可实现文件上传下载")]),t._v(" "),e("h3",{attrs:{id:"_3-配置docker环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置docker环境"}},[t._v("#")]),t._v(" 3.配置Docker环境")]),t._v(" "),e("h4",{attrs:{id:"docker详细介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker详细介绍"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"./docker"}},[t._v("Docker详细介绍")])]),t._v(" "),e("h4",{attrs:{id:"windows版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows版本"}},[t._v("#")]),t._v(" windows版本")]),t._v(" "),e("p",[t._v("如果想在本地windows环境直接使用docker，可以下载 docker桌面版应用，")]),t._v(" "),e("p",[t._v("该应用是基于 WSL2（windows的linux子系统），来实现在windows环境即可操作linux命令，同时可以通过vscode远程连接生成的后端linux-docker环境  "),e("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-containers",target:"_blank",rel:"noopener noreferrer"}},[t._v("WSL2的Docker远程容器入门"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("但是WSL2需要开启Hyper-V和Device/Credential Guard服务，会造成与VMware冲突，不能启动虚拟机（新版本好像已经解决该冲突）")]),t._v(" "),e("p",[t._v("ps：如果已经存在上述冲突问题，可使用如下方法解决")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("WIN+R打开运行，然后输入services.msc回车;\n找到 HV主机服务，双击打开设置为禁用；\n打开Windows PowerShell（管理员）;\n运行命令：bcdedit /set hypervisorlaunchtype off；\n然后重启\n")])])]),e("p",[t._v("因为WSL2占用内存较大，我使用的是在VM虚拟机centos系统中直接配置docker环境")]),t._v(" "),e("h4",{attrs:{id:"centos版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos版本"}},[t._v("#")]),t._v(" centOS版本")]),t._v(" "),e("p",[t._v("docker的安装要求64位系统且内核版本大于3.10。所以如果是centos的话，必须安装CentOS7.0或以上版本。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("yum -y update // 全系统的软件版本升级\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -r  //3.10.0-1160.el7.x86_64 查看内核版本\n")])])]),e("p",[t._v("安装方法")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y yum-utils\t//yum安装依赖包工具\nyum-config-manager "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\t\t//设置阿里云镜像仓库\n    --add-repo "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum makecache fast\t\t\t//更新yum源后更新索引，生成缓存提高搜索速度，yum clean all可清除\nyum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce docker-ce-cli containerd.io\t//安装docker引擎\nsystemctl start docker\t\t//启动docker\ndocker run hello-world\t\t//验证是否可用\ndocker version\t\t//查看docker版本\n")])])]),e("h4",{attrs:{id:"配置centos下阿里云镜像加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置centos下阿里云镜像加速"}},[t._v("#")]),t._v(" 配置centos下阿里云镜像加速")]),t._v(" "),e("p",[t._v("修改daemon配置文件")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /etc/docker\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" /etc/docker/daemon.json "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<-")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'EOF\'\n{\n  "registry-mirrors": ["https://ytvgdcuq.mirror.aliyuncs.com"]\n}\nEOF')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl daemon-reload\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl restart docker\n")])])]),e("h4",{attrs:{id:"卸载docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#卸载docker"}},[t._v("#")]),t._v(" 卸载docker")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("yum remove docker-ce docker-ce-cli containerd.io\t//卸载依赖\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /var/lib/docker \t\t//删除资源\n")])])]),e("h3",{attrs:{id:"_4-使用docker搭建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用docker搭建镜像"}},[t._v("#")]),t._v(" 4.使用docker搭建镜像")]),t._v(" "),e("h2",{attrs:{id:"更多"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更多"}},[t._v("#")]),t._v(" 更多")]),t._v(" "),e("p",[t._v("新手推荐使用： "),e("a",{attrs:{href:"https://www.bt.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("宝塔面板"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("外链："),e("a",{attrs:{href:"https://www.zhihu.com/question/20463581/answer/51381121",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何搭建个人独立博客"),e("OutboundLink")],1)]),t._v(" "),e("h5",{attrs:{id:"推荐一些我遇到的觉得好看的个人博客网站"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#推荐一些我遇到的觉得好看的个人博客网站"}},[t._v("#")]),t._v(" 推荐一些我遇到的觉得好看的个人博客网站：")]),t._v(" "),e("p",[t._v("MRJU ： https://mrju.cn/")]),t._v(" "),e("p",[t._v("蔡 ：http://aka.cjzblog.top/")]),t._v(" "),e("p",[t._v("柏荧的博客：http://qiubaiying.vip/")])])}),[],!1,null,null,null);s.default=r.exports}}]);